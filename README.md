# Dreamina AI Free æœåŠ¡
æ”¯æŒå³æ¢¦è¶…å¼ºå›¾åƒç”Ÿæˆèƒ½åŠ›ï¼Œé›¶é…ç½®éƒ¨ç½²ï¼Œå¤šè·¯ token æ”¯æŒã€‚

ä¸ OpenAI æ¥å£å®Œå…¨å…¼å®¹ã€‚

## ğŸš€ æœ€æ–°ä¼˜åŒ–ï¼ˆv0.2.0ï¼‰

**v0.2.0 - Agent åŠŸèƒ½å¢å¼ºï¼š**
- âœ… **æ™ºèƒ½ Agent è‡ªåŠ¨è½®è¯¢** - Agent å·¥å…·è°ƒç”¨åè‡ªåŠ¨è½®è¯¢ç”Ÿæˆç»“æœ
- âœ… **Markdown æ ¼å¼è¿”å›** - è‡ªåŠ¨å°†å›¾ç‰‡/è§†é¢‘è½¬æ¢ä¸º Markdown
- âœ… **ä¸€å¥è¯å¤šå›¾ç”Ÿæˆ** - "ç”»ä¸‰å¼ å“ˆå£«å¥‡ 16:9" â†’ è‡ªåŠ¨ç”Ÿæˆ3å¼ å¹¶è¿”å›
- âœ… **OpenAI å®Œå…¨å…¼å®¹** - ä¿æŒ OpenAI API æ ¼å¼ï¼Œå†…éƒ¨å¤„ç† Agent å·¥å…·è°ƒç”¨

æŸ¥çœ‹ [AGENT_README.md](./AGENT_README.md) äº†è§£ Agent å®Œæ•´åŠŸèƒ½ã€‚

**v0.1.0 - æ ¸å¿ƒæ€§èƒ½ä¼˜åŒ–ï¼š**
- âœ… **æ™ºèƒ½è½®è¯¢æœºåˆ¶** - æ€§èƒ½æå‡ 30-50%ï¼Œè‡ªé€‚åº”è½®è¯¢é—´éš”
- âœ… **çœŸæµå¼å“åº”** - å“åº”å»¶è¿Ÿé™ä½ 99.7%ï¼ˆä» 30-300ç§’ â†’ <100msï¼‰
- âœ… **å®æ—¶è¿›åº¦åé¦ˆ** - ç”¨æˆ·ä½“éªŒæ˜¾è‘—æ”¹å–„ï¼Œç«‹å³å“åº”+å¼‚æ­¥ç”Ÿæˆ
- âœ… **è¯¦ç»†æ—¥å¿—è¾“å‡º** - emoji å‹å¥½çš„ç»“æ„åŒ–æ—¥å¿—

æŸ¥çœ‹ [OPTIMIZATION.md](./OPTIMIZATION.md) äº†è§£è¯¦ç»†ä¼˜åŒ–è¯´æ˜ã€‚

## ç›®å½•

- [Dreamina AI Free æœåŠ¡](#jimeng-ai-free-æœåŠ¡)
  - [ç›®å½•](#ç›®å½•)
  - [å…è´£å£°æ˜](#å…è´£å£°æ˜)
  - [æ¥å…¥å‡†å¤‡](#æ¥å…¥å‡†å¤‡)
    - [å¤šè´¦å·æ¥å…¥](#å¤šè´¦å·æ¥å…¥)
  - [æ•ˆæœå±•ç¤º](#æ•ˆæœå±•ç¤º)
  - [Docker éƒ¨ç½²](#docker-éƒ¨ç½²)
    - [Docker-compose éƒ¨ç½²](#docker-compose-éƒ¨ç½²)
    - [Render éƒ¨ç½²](#render-éƒ¨ç½²)
    - [Vercel éƒ¨ç½²](#vercel-éƒ¨ç½²)
  - [åŸç”Ÿéƒ¨ç½²](#åŸç”Ÿéƒ¨ç½²)
  - [æ¨èä½¿ç”¨å®¢æˆ·ç«¯](#æ¨èä½¿ç”¨å®¢æˆ·ç«¯)
 - [æ¥å£åˆ—è¡¨](#æ¥å£åˆ—è¡¨)
    - [å›¾åƒç”Ÿæˆ](#å›¾åƒç”Ÿæˆ)
    - [CapCut ä¼šè¯ä»£ç†](#capcut-ä¼šè¯ä»£ç†)
  - [Star History](#star-history)

## å…è´£å£°æ˜

**é€†å‘ API æ˜¯ä¸ç¨³å®šçš„ï¼Œå»ºè®®å‰å¾€å³æ¢¦ AI å®˜æ–¹ https://jimeng.jianying.com/ ä½“éªŒåŠŸèƒ½ï¼Œé¿å…å°ç¦çš„é£é™©ã€‚**

**æœ¬ç»„ç»‡å’Œä¸ªäººä¸æ¥å—ä»»ä½•èµ„é‡‘æåŠ©å’Œäº¤æ˜“ï¼Œæ­¤é¡¹ç›®æ˜¯çº¯ç²¹ç ”ç©¶äº¤æµå­¦ä¹ æ€§è´¨ï¼**

**ä»…é™è‡ªç”¨ï¼Œç¦æ­¢å¯¹å¤–æä¾›æœåŠ¡æˆ–å•†ç”¨ï¼Œé¿å…å¯¹å®˜æ–¹é€ æˆæœåŠ¡å‹åŠ›ï¼Œå¦åˆ™é£é™©è‡ªæ‹…ï¼**

**ä»…é™è‡ªç”¨ï¼Œç¦æ­¢å¯¹å¤–æä¾›æœåŠ¡æˆ–å•†ç”¨ï¼Œé¿å…å¯¹å®˜æ–¹é€ æˆæœåŠ¡å‹åŠ›ï¼Œå¦åˆ™é£é™©è‡ªæ‹…ï¼**

**ä»…é™è‡ªç”¨ï¼Œç¦æ­¢å¯¹å¤–æä¾›æœåŠ¡æˆ–å•†ç”¨ï¼Œé¿å…å¯¹å®˜æ–¹é€ æˆæœåŠ¡å‹åŠ›ï¼Œå¦åˆ™é£é™©è‡ªæ‹…ï¼**

## æ¥å…¥å‡†å¤‡

ä» [å³æ¢¦](https://jimeng.jianying.com/) è·å– sessionid

å¦‚ä½¿ç”¨å›½é™…ç‰ˆï¼šä» [å³æ¢¦å›½é™…ç‰ˆ](https://dreamina.capcut.com/) è·å– `sessionid`ï¼ŒåŒæ ·åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„ Application > Cookies ä¸­æŸ¥çœ‹ï¼›å›½é™…åŒºé€šå¸¸æ— éœ€è¿½åŠ åŒºåŸŸåç¼€ï¼Œç›´æ¥ä½¿ç”¨å³å¯ï¼š

```
Authorization: Bearer sessionid
```

è¿›å…¥å³æ¢¦ç™»å½•è´¦å·ï¼Œç„¶å F12 æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œä» Application > Cookies ä¸­æ‰¾åˆ°`sessionid`çš„å€¼ï¼Œè¿™å°†ä½œä¸º Authorization çš„ Bearer Token å€¼ï¼š`Authorization: Bearer sessionid`

ä¸­å›½å¤§é™†ï¼ˆCNï¼‰åŒºåŸŸè´¦å·/ç½‘ç»œè¯·åœ¨ token æœ«å°¾è¿½åŠ åŒºåŸŸåç¼€ä»¥èµ° CN åŸŸï¼š

```
Authorization: Bearer sessionid:cn
```

![example0](./doc/example-0.png)

### å¤šè´¦å·æ¥å…¥

ä½ å¯ä»¥é€šè¿‡æä¾›å¤šä¸ªè´¦å·çš„ sessionid å¹¶ä½¿ç”¨`,`æ‹¼æ¥æä¾›ï¼š

`Authorization: Bearer sessionid1,sessionid2,sessionid3`

å¦‚æ¶‰åŠä¸åŒåŒºåŸŸï¼Œå¯å•ç‹¬ä¸ºæŸä¸ªè´¦å·è¿½åŠ åŒºåŸŸåç¼€ï¼Œä¾‹å¦‚ï¼š

`Authorization: Bearer sessionid_cn:cn,sessionid_us`

æ¯æ¬¡è¯·æ±‚æœåŠ¡ä¼šä»ä¸­æŒ‘é€‰ä¸€ä¸ªã€‚

## æ•ˆæœå±•ç¤º

```text
å¯çˆ±çš„ç†ŠçŒ«æ¼«ç”»ï¼Œç†ŠçŒ«çœ‹åˆ°åœ°ä¸Šæœ‰ä¸€ä¸ªå«â€œå³æ¢¦â€çš„æ—¶é—´æœºå™¨ï¼Œç„¶åè¯´äº†ä¸€å¥â€œæˆ‘å€Ÿç”¨ä¸€ä¸‹æ²¡äº‹å§â€
```

![example1](./doc/example-1.jpeg)

## Docker éƒ¨ç½²

```shell
docker build -t dreamina-free-api:local .
docker run -it -d --init --name dreamina-free-api -p 8000:8000 -e TZ=Asia/Shanghai dreamina-free-api:local
```

æŸ¥çœ‹æœåŠ¡å®æ—¶æ—¥å¿—

```shell
docker logs -f dreamina-free-api
```

é‡å¯æœåŠ¡

```shell
docker restart dreamina-free-api
```

åœæ­¢æœåŠ¡

```shell
docker stop dreamina-free-api
```

### Docker-compose éƒ¨ç½²ï¼ˆæœ¬åœ°æ„å»ºï¼‰

```yaml
version: "3"

services:
  dreamina-free-api:
    container_name: dreamina-free-api
    # æœ¬åœ°æºç æ„å»ºé•œåƒ
    build:
      context: .
      dockerfile: Dockerfile
    restart: always
    ports:
      - "8000:8000"
    environment:
      - TZ=Asia/Shanghai
```

ä½¿ç”¨ä»“åº“æ ¹ç›®å½•å·²æä¾›çš„ `docker-compose.yml` å¿«é€Ÿå¯åŠ¨ï¼š

```bash
docker compose up -d
```

ï¼ˆæç¤ºï¼‰æœ¬é¡¹ç›®æ— è¿œç¨‹é•œåƒï¼ŒCompose æ–¹æ¡ˆé»˜è®¤ä»æœ¬åœ°æºç æ„å»ºé•œåƒã€‚

### æœ¬åœ°æ‰‹åŠ¨æ„å»ºé•œåƒ

```bash
docker build -t dreamina-free-api:local .
docker run -it -d --init --name dreamina-free-api -p 8000:8000 -e TZ=Asia/Shanghai dreamina-free-api:local
```

### Render éƒ¨ç½²

**æ³¨æ„ï¼šéƒ¨åˆ†éƒ¨ç½²åŒºåŸŸå¯èƒ½æ— æ³•è¿æ¥å³æ¢¦ï¼Œå¦‚å®¹å™¨æ—¥å¿—å‡ºç°è¯·æ±‚è¶…æ—¶æˆ–æ— æ³•è¿æ¥ï¼Œè¯·åˆ‡æ¢å…¶ä»–åŒºåŸŸéƒ¨ç½²ï¼**
**æ³¨æ„ï¼šå…è´¹è´¦æˆ·çš„å®¹å™¨å®ä¾‹å°†åœ¨ä¸€æ®µæ—¶é—´ä¸æ´»åŠ¨æ—¶è‡ªåŠ¨åœæ­¢è¿è¡Œï¼Œè¿™ä¼šå¯¼è‡´ä¸‹æ¬¡è¯·æ±‚æ—¶é‡åˆ° 50 ç§’æˆ–æ›´é•¿çš„å»¶è¿Ÿï¼Œå»ºè®®æŸ¥çœ‹[Render å®¹å™¨ä¿æ´»](https://github.com/LLM-Red-Team/free-api-hub/#Render%E5%AE%B9%E5%99%A8%E4%BF%9D%E6%B4%BB)**

1. fork æœ¬é¡¹ç›®åˆ°ä½ çš„ github è´¦å·ä¸‹ã€‚

2. è®¿é—® [Render](https://dashboard.render.com/) å¹¶ç™»å½•ä½ çš„ github è´¦å·ã€‚

3. æ„å»ºä½ çš„ Web Serviceï¼ˆNew+ -> Build and deploy from a Git repository -> Connect ä½  fork çš„é¡¹ç›® -> é€‰æ‹©éƒ¨ç½²åŒºåŸŸ -> é€‰æ‹©å®ä¾‹ç±»å‹ä¸º Free -> Create Web Serviceï¼‰ã€‚

4. ç­‰å¾…æ„å»ºå®Œæˆåï¼Œå¤åˆ¶åˆ†é…çš„åŸŸåå¹¶æ‹¼æ¥ URL è®¿é—®å³å¯ã€‚

### Vercel éƒ¨ç½²

**æ³¨æ„ï¼šVercel å…è´¹è´¦æˆ·çš„è¯·æ±‚å“åº”è¶…æ—¶æ—¶é—´ä¸º 10 ç§’ï¼Œä½†æ¥å£å“åº”é€šå¸¸è¾ƒä¹…ï¼Œå¯èƒ½ä¼šé‡åˆ° Vercel è¿”å›çš„ 504 è¶…æ—¶é”™è¯¯ï¼**

è¯·å…ˆç¡®ä¿å®‰è£…äº† Node.js ç¯å¢ƒã€‚

```shell
npm i -g vercel --registry http://registry.npmmirror.com
vercel login
git clone https://github.com/LLM-Red-Team/dreamina-free-api
cd dreamina-free-api
vercel --prod
```

## åŸç”Ÿéƒ¨ç½²

è¯·å‡†å¤‡ä¸€å°å…·æœ‰å…¬ç½‘ IP çš„æœåŠ¡å™¨ï¼ˆå¤–ç½‘ï¼‰å¹¶å°† 8000 ç«¯å£å¼€æ”¾ã€‚

è¯·å…ˆå®‰è£…å¥½ Node.js ç¯å¢ƒå¹¶ä¸”é…ç½®å¥½ç¯å¢ƒå˜é‡ï¼Œç¡®è®¤ node å‘½ä»¤å¯ç”¨ã€‚

å®‰è£…ä¾èµ–

```shell
npm i
```

å®‰è£… PM2 è¿›è¡Œè¿›ç¨‹å®ˆæŠ¤

```shell
npm i -g pm2
```

ç¼–è¯‘æ„å»ºï¼Œçœ‹åˆ° dist ç›®å½•å°±æ˜¯æ„å»ºå®Œæˆ

```shell
npm run build
```

å¯åŠ¨æœåŠ¡

```shell
pm2 start dist/index.js --name "dreamina-free-api"
```

æŸ¥çœ‹æœåŠ¡å®æ—¶æ—¥å¿—

```shell
pm2 logs dreamina-free-api
```

é‡å¯æœåŠ¡

```shell
pm2 reload dreamina-free-api
```

åœæ­¢æœåŠ¡

```shell
pm2 stop dreamina-free-api
```

## æ¥å£åˆ—è¡¨

ç›®å‰æ”¯æŒä¸ OpenAI å…¼å®¹çš„ `/v1/chat/completions` æ¥å£ï¼Œå¯è‡ªè¡Œä½¿ç”¨ä¸ OpenAI æˆ–å…¶ä»–å…¼å®¹çš„å®¢æˆ·ç«¯æ¥å…¥æ¥å£ï¼Œæˆ–è€…ä½¿ç”¨ [dify](https://dify.ai/) ç­‰çº¿ä¸ŠæœåŠ¡æ¥å…¥ä½¿ç”¨ã€‚

### å¯¹è¯æ¥å£ï¼ˆå›¾åƒç”Ÿæˆï¼‰

**POST /v1/chat/completions**

header éœ€è¦è®¾ç½® Authorization å¤´éƒ¨ï¼š

```
Authorization: Bearer [sessionid]
```

**å®Œæ•´è¯·æ±‚ç¤ºä¾‹ï¼ˆå›¾åƒç”Ÿæˆï¼‰ï¼š**

```bash
curl -X POST http://localhost:8000/v1/chat/completions \
  -H "Authorization: Bearer YOUR_SESSION_ID" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "jimeng-4.0",
    "messages": [
      {
        "role": "user",
        "content": "å°‘å¥³ç¥ˆç¥·ä¸­... -re 4k -ra 16:9"
      }
    ],
    "stream": false
  }'
```

**å®Œæ•´å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "id": "chatcmpl-b400abe0-b4c3-11ef-b2eb-4175f5393bfd",
  "model": "jimeng-4.0",
  "object": "chat.completion",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "![image_0](https://p9-heycan-hgt-sign.byteimg.com/tos-cn-i-3jr8j4ixpe/61bceb3afeb54c1c80ffdd598ac2f72d~tplv-3jr8j4ixpe-aigc_resize:0:0.jpeg?lk3s=43402efa&x-expires=1735344000&x-signature=DUY6jlx4zAXRYJeATyjZ3O6F1Pw%3D&format=.jpeg)\n![image_1](https://p3-heycan-hgt-sign.byteimg.com/tos-cn-i-3jr8j4ixpe/e37ab3cd95854cd7b37fb697ea2cb4da~tplv-3jr8j4ixpe-aigc_resize:0:0.jpeg?lk3s=43402efa&x-expires=1735344000&x-signature=oKtY400tjZeydKMyPZufjt0Qpjs%3D&format=.jpeg)\n![image_2](https://p9-heycan-hgt-sign.byteimg.com/tos-cn-i-3jr8j4ixpe/13841ff1c30940cf931eccc22405656b~tplv-3jr8j4ixpe-aigc_resize:0:0.jpeg?lk3s=43402efa&x-expires=1735344000&x-signature=4UffSRMmOeYoC0u%2B5igl9S%2BfYKs%3D&format=.jpeg)\n![image_3](https://p6-heycan-hgt-sign.byteimg.com/tos-cn-i-3jr8j4ixpe/731c350244b745d5990e8931b79b7fe7~tplv-3jr8j4ixpe-aigc_resize:0:0.jpeg?lk3s=43402efa&x-expires=1735344000&x-signature=ywYjZQeP3t2yyvx6Wlud%2BCB28nU%3D&format=.jpeg)\n"
      },
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1,
    "completion_tokens": 1,
    "total_tokens": 2
  },
  "created": 1733593810
}
```

**æ”¯æŒçš„å›¾åƒæ¨¡å‹ï¼š**
- `jimeng-4.0`ï¼ˆé»˜è®¤ï¼Œæ¨èï¼‰
- `jimeng-3.1` / `jimeng-3.0` / `jimeng-2.1` / `jimeng-2.0-pro` / `jimeng-2.0` / `jimeng-1.4`
- `jimeng-xl-pro`
- `jimeng-nano-banana`ï¼ˆå¿«é€Ÿç”Ÿæˆï¼Œå›ºå®š 1024x1024ï¼‰

### å¯¹è¯æ¥å£ï¼ˆè§†é¢‘ç”Ÿæˆï¼‰

**POST /v1/chat/completions**

**å®Œæ•´è¯·æ±‚ç¤ºä¾‹ï¼ˆè§†é¢‘ç”Ÿæˆï¼‰ï¼š**

```bash
curl -X POST http://localhost:8000/v1/chat/completions \
  -H "Authorization: Bearer YOUR_SESSION_ID" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "jimeng-video-3.0-pro",
    "messages": [
      {
        "role": "user",
        "content": [
          {"type": "text", "text": "è·‘èµ·æ¥ -ra 16:9 -d 5"},
          {"type": "image_url", "image_url": {"url": "https://example.com/first_frame.jpg"}}
        ]
      }
    ],
    "stream": false
  }'
```

**å®Œæ•´å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "id": "chatcmpl-c500def1-c5d4-22fg-c3fc-5286g6404cgf",
  "model": "jimeng-video-3.0-pro",
  "object": "chat.completion",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "<video controls=\"controls\" width=\"100%\">\n  <source src=\"https://v16-webapp-prime.us.tiktok.com/video/tos/useast2a/tos-useast2a-ve-0068c003/oQdABfIeNzEgCIBnQgmDEAIgfQnEeB/?a=1988&ch=0&cr=3&dr=0&lr=unwatermarked&cd=0%7C0%7C0%7C3&cv=1&br=1234&bt=617&bti=OTg3MzQzNDU&cs=0&ds=6&ft=iqa.yH-I_Myq8Zmo~R3wKMeuxKsd&mime_type=video_mp4&qs=0&rc=aGc4ZTw6Zzg8OjY4ZDw4OUBpM3RqbGc6ZnJ1cjMzZzczNEBeYzMuYC4yXy8xYC0xYTUvYSNqcWxvcjRnMGRgLS1kMS9zcw%3D%3D&l=20231207123456789012345678901234567890\" type=\"video/mp4\">\n</video>\n\n[Download Video](https://v16-webapp-prime.us.tiktok.com/video/tos/useast2a/tos-useast2a-ve-0068c003/oQdABfIeNzEgCIBnQgmDEAIgfQnEeB/?a=1988&ch=0&cr=3&dr=0&lr=unwatermarked&cd=0%7C0%7C0%7C3&cv=1&br=1234&bt=617&bti=OTg3MzQzNDU&cs=0&ds=6&ft=iqa.yH-I_Myq8Zmo~R3wKMeuxKsd&mime_type=video_mp4&qs=0&rc=aGc4ZTw6Zzg8OjY4ZDw4OUBpM3RqbGc6ZnJ1cjMzZzczNEBeYzMuYC4yXy8xYC0xYTUvYSNqcWxvcjRnMGRgLS1kMS9zcw%3D%3D&l=20231207123456789012345678901234567890)\n"
      },
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1,
    "completion_tokens": 1,
    "total_tokens": 2
  },
  "created": 1733593810
}
```

**æ”¯æŒçš„è§†é¢‘æ¨¡å‹ï¼š**
- `jimeng-video-3.0`ï¼ˆé»˜è®¤ï¼‰
- `jimeng-video-3.0-pro`ï¼ˆä¸“ä¸šç‰ˆï¼Œè´¨é‡æ›´é«˜ï¼‰

**æç¤ºè¯å‚æ•°è¯´æ˜ï¼š**
- å›¾åƒç”Ÿæˆæ”¯æŒï¼š
  - `-re <resolution>`: åˆ†è¾¨ç‡ï¼Œæ”¯æŒ `1k`, `2k`ï¼ˆé»˜è®¤ï¼‰, `4k`
  - `-ra <ratio>`: å®½é«˜æ¯”ï¼Œæ”¯æŒ `1:1`, `4:3`, `3:4`, `16:9`, `9:16`, `3:2`, `2:3`, `21:9`
- è§†é¢‘ç”Ÿæˆæ”¯æŒï¼š
  - `-ra <ratio>`: å®½é«˜æ¯”ï¼Œæ”¯æŒ `21:9`, `16:9`, `4:3`, `1:1`, `3:4`, `9:16`
  - `-d <seconds>`: æ—¶é•¿ï¼ˆç§’ï¼‰ï¼Œæ”¯æŒ `5`ï¼ˆé»˜è®¤ï¼‰æˆ– `10`

### å›¾åƒç”Ÿæˆ

å›¾åƒç”Ÿæˆæ¥å£ï¼Œä¸ openai çš„ [images-create-api](https://platform.openai.com/docs/api-reference/images/create) å…¼å®¹ï¼›åŒæ—¶ `/v1/chat/completions` äº¦å¯ç›´æ¥ç”Ÿæˆå›¾ç‰‡å¹¶è¿”å› Markdown å›¾ç‰‡é“¾æ¥ã€‚

**POST /v1/images/generations**

header éœ€è¦è®¾ç½® Authorization å¤´éƒ¨ï¼š

```
Authorization: Bearer [sessionid]
```

**å®Œæ•´è¯·æ±‚ç¤ºä¾‹ï¼š**

```bash
curl -X POST http://localhost:8000/v1/images/generations \
  -H "Authorization: Bearer YOUR_SESSION_ID" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "jimeng-4.0",
    "prompt": "å°‘å¥³ç¥ˆç¥·ä¸­... -re 4k -ra 16:9",
    "negative_prompt": "",
    "sample_strength": 0.5,
    "response_format": "url"
  }'
```

**å®Œæ•´å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "created": 1733593810,
  "data": [
    {
      "url": "https://p9-heycan-hgt-sign.byteimg.com/tos-cn-i-3jr8j4ixpe/61bceb3afeb54c1c80ffdd598ac2f72d~tplv-3jr8j4ixpe-aigc_resize:0:0.jpeg?lk3s=43402efa&x-expires=1735344000&x-signature=DUY6jlx4zAXRYJeATyjZ3O6F1Pw%3D&format=.jpeg"
    },
    {
      "url": "https://p3-heycan-hgt-sign.byteimg.com/tos-cn-i-3jr8j4ixpe/e37ab3cd95854cd7b37fb697ea2cb4da~tplv-3jr8j4ixpe-aigc_resize:0:0.jpeg?lk3s=43402efa&x-expires=1735344000&x-signature=oKtY400tjZeydKMyPZufjt0Qpjs%3D&format=.jpeg"
    },
    {
      "url": "https://p9-heycan-hgt-sign.byteimg.com/tos-cn-i-3jr8j4ixpe/13841ff1c30940cf931eccc22405656b~tplv-3jr8j4ixpe-aigc_resize:0:0.jpeg?lk3s=43402efa&x-expires=1735344000&x-signature=4UffSRMmOeYoC0u%2B5igl9S%2BfYKs%3D&format=.jpeg"
    },
    {
      "url": "https://p6-heycan-hgt-sign.byteimg.com/tos-cn-i-3jr8j4ixpe/731c350244b745d5990e8931b79b7fe7~tplv-3jr8j4ixpe-aigc_resize:0:0.jpeg?lk3s=43402efa&x-expires=1735344000&x-signature=ywYjZQeP3t2yyvx6Wlud%2BCB28nU%3D&format=.jpeg"
    }
  ]
}
```

**å‚æ•°è¯´æ˜ï¼š**

- `model`: å›¾åƒæ¨¡å‹ï¼Œæ”¯æŒï¼š
  - `jimeng-4.0`ï¼ˆé»˜è®¤ï¼Œæ¨èï¼‰
  - `jimeng-3.1` / `jimeng-3.0` / `jimeng-2.1` / `jimeng-2.0-pro` / `jimeng-2.0` / `jimeng-1.4`
  - `jimeng-xl-pro`
  - `jimeng-nano-banana`ï¼ˆå¿«é€Ÿç”Ÿæˆï¼Œå›ºå®š 1024x1024ï¼‰
- `prompt`: æç¤ºè¯ï¼Œæ”¯æŒå†…åµŒå‚æ•°ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ï¼š
  - `-re <resolution>`: åˆ†è¾¨ç‡ï¼Œæ”¯æŒ `1k`, `2k`ï¼ˆé»˜è®¤ï¼‰, `4k`
  - `-ra <ratio>`: å®½é«˜æ¯”ï¼Œæ”¯æŒ `1:1`, `4:3`, `3:4`, `16:9`, `9:16`, `3:2`, `2:3`, `21:9`
  - ç¤ºä¾‹ï¼š`"å°‘å¥³ç¥ˆç¥·ä¸­... -re 4k -ra 16:9"` ä¼šè‡ªåŠ¨è§£æå‚æ•°
- `negative_prompt`: è´Ÿå‘æç¤ºè¯ï¼ˆå¯é€‰ï¼‰
- `resolution`: åˆ†è¾¨ç‡ï¼ˆå¯é€‰ï¼Œå¦‚æœ prompt ä¸­æœ‰ `-re` å‚æ•°åˆ™ä¼˜å…ˆä½¿ç”¨ prompt ä¸­çš„ï¼‰
- `ratio`: å®½é«˜æ¯”ï¼ˆå¯é€‰ï¼Œå¦‚æœ prompt ä¸­æœ‰ `-ra` å‚æ•°åˆ™ä¼˜å…ˆä½¿ç”¨ prompt ä¸­çš„ï¼‰
- `width` / `height`: è‡ªå®šä¹‰å®½é«˜ï¼ˆå¯é€‰ï¼Œä¼˜å…ˆçº§ä½äº resolution + ratioï¼‰
- `sample_strength`: é‡‡æ ·å¼ºåº¦ï¼ŒèŒƒå›´ 0-1ï¼Œé»˜è®¤ 0.5
- `image`: å‚è€ƒå›¾ç‰‡ URL æˆ– Base64ï¼ˆå¯é€‰ï¼Œä»… jimeng-3.0 å’Œ jimeng-4.0 æ”¯æŒï¼‰
- `response_format`: å“åº”æ ¼å¼ï¼Œ`url` æˆ– `b64_json`

### è§†é¢‘ç”Ÿæˆ

è§†é¢‘ç”Ÿæˆæ¥å£ï¼Œæ”¯æŒæ–‡ç”Ÿè§†é¢‘ã€å›¾ç”Ÿè§†é¢‘ã€é¦–å°¾å¸§è§†é¢‘ä¸‰ç§æ¨¡å¼ã€‚

**POST /v1/videos/generations**

header éœ€è¦è®¾ç½® Authorization å¤´éƒ¨ï¼š

```
Authorization: Bearer [sessionid]
```

**å®Œæ•´è¯·æ±‚ç¤ºä¾‹ï¼ˆé¦–å°¾å¸§è§†é¢‘ï¼‰ï¼š**

```bash
curl -X POST http://localhost:8000/v1/videos/generations \
  -H "Authorization: Bearer YOUR_SESSION_ID" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "jimeng-video-3.0-pro",
    "prompt": "è·‘èµ·æ¥ -ra 16:9 -d 5",
    "images": [
      "https://example.com/first_frame.jpg",
      "https://example.com/end_frame.jpg"
    ],
    "response_format": "url"
  }'
```

**å®Œæ•´å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "created": 1733593810,
  "data": [
    {
      "url": "https://v16-webapp-prime.us.tiktok.com/video/tos/useast2a/tos-useast2a-ve-0068c003/oQdABfIeNzEgCIBnQgmDEAIgfQnEeB/?a=1988&ch=0&cr=3&dr=0&lr=unwatermarked&cd=0%7C0%7C0%7C3&cv=1&br=1234&bt=617&bti=OTg3MzQzNDU&cs=0&ds=6&ft=iqa.yH-I_Myq8Zmo~R3wKMeuxKsd&mime_type=video_mp4&qs=0&rc=aGc4ZTw6Zzg8OjY4ZDw4OUBpM3RqbGc6ZnJ1cjMzZzczNEBeYzMuYC4yXy8xYC0xYTUvYSNqcWxvcjRnMGRgLS1kMS9zcw%3D%3D&l=20231207123456789012345678901234567890"
    }
  ]
}
```

**å‚æ•°è¯´æ˜ï¼š**

- `model`: è§†é¢‘æ¨¡å‹ï¼Œæ”¯æŒï¼š
  - `jimeng-video-3.0`ï¼ˆé»˜è®¤ï¼‰
  - `jimeng-video-3.0-pro`ï¼ˆä¸“ä¸šç‰ˆï¼Œè´¨é‡æ›´é«˜ï¼‰
- `prompt`: æç¤ºè¯ï¼Œæ”¯æŒå†…åµŒå‚æ•°ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ï¼š
  - `-ra <ratio>`: å®½é«˜æ¯”ï¼Œæ”¯æŒ `21:9`, `16:9`, `4:3`, `1:1`, `3:4`, `9:16`
  - `-d <seconds>`: æ—¶é•¿ï¼ˆç§’ï¼‰ï¼Œæ”¯æŒ `5`ï¼ˆé»˜è®¤ï¼‰æˆ– `10`
  - ç¤ºä¾‹ï¼š`"è·‘èµ·æ¥ -ra 16:9 -d 5"` ä¼šè‡ªåŠ¨è§£æå‚æ•°
- `images`: å›¾ç‰‡æ•°ç»„ï¼ˆå¯é€‰ï¼‰ï¼Œæ”¯æŒè‡ªåŠ¨æ¨¡å¼æ£€æµ‹ï¼š
  - 0 å¼ å›¾ç‰‡ï¼šæ–‡ç”Ÿè§†é¢‘æ¨¡å¼ï¼ˆçº¯æ–‡æœ¬ç”Ÿæˆï¼‰
  - 1 å¼ å›¾ç‰‡ï¼šå›¾ç”Ÿè§†é¢‘æ¨¡å¼ï¼ˆä»é¦–å¸§å›¾ç‰‡ç”Ÿæˆï¼‰
  - 2 å¼ å›¾ç‰‡ï¼šé¦–å°¾å¸§è§†é¢‘æ¨¡å¼ï¼ˆä»é¦–å¸§å’Œå°¾å¸§ç”Ÿæˆä¸­é—´è¿‡æ¸¡ï¼‰
- `first_frame_image`: é¦–å¸§å›¾ç‰‡ URL æˆ– Base64ï¼ˆå¯é€‰ï¼Œå…¼å®¹æ—§å‚æ•°ï¼‰
- `end_frame_image`: å°¾å¸§å›¾ç‰‡ URL æˆ– Base64ï¼ˆå¯é€‰ï¼Œå…¼å®¹æ—§å‚æ•°ï¼‰
- `aspect_ratio`: å®½é«˜æ¯”ï¼ˆå¯é€‰ï¼Œå¦‚æœ prompt ä¸­æœ‰ `-ra` å‚æ•°åˆ™ä¼˜å…ˆä½¿ç”¨ prompt ä¸­çš„ï¼‰
- `duration`: æ—¶é•¿ï¼ˆç§’ï¼‰ï¼Œå¯é€‰ï¼Œé»˜è®¤ 5
- `fps`: å¸§ç‡ï¼Œå¯é€‰ï¼Œé»˜è®¤ 24
- `response_format`: å“åº”æ ¼å¼ï¼Œ`url` æˆ– `b64_json`

### CapCut ä¼šè¯ä»£ç†ï¼ˆæ¨¡å‹åï¼šagentï¼‰

é€šè¿‡ OpenAI å…¼å®¹çš„ `/v1/chat/completions` ä»£ç† CapCut ä¼šè¯ SSEï¼Œè¿”å› OpenAI é£æ ¼çš„ `chat.completion` æˆ–æµå¼ `chat.completion.chunk`ã€‚

è¯·æ±‚ç¤ºä¾‹ï¼ˆæµå¼ï¼‰ï¼š

```bash
curl -X POST http://localhost:8000/v1/chat/completions \
  -H 'Authorization: Bearer <sessionid>' \
  -H 'Content-Type: application/json' \
  -N \
  -d '{
    "model": "agent",
    "stream": true,
    "messages": [
      {"role":"user","content":"è®²ä¸ª20å­—çš„ç¬‘è¯"}
    ]
  }'
```

è¯´æ˜ï¼š
- å½“ `model` ä¸º `agent` æ—¶ï¼ŒæœåŠ¡å°†è°ƒç”¨ CapCut `/mweb/v1/creation_agent/v2/conversation` å¹¶æŠŠ SSE è½¬æ¢ä¸º OpenAI é£æ ¼äº‹ä»¶ã€‚
- å…¶ä½™ `model` ä½¿ç”¨å†…ç½®å³æ¢¦å›¾åƒç”Ÿæˆé€»è¾‘ã€‚

å“åº”æ•°æ®ï¼š

```json
{
  "created": 1733593745,
  "data": [
    {
      "url": "https://p9-heycan-hgt-sign.byteimg.com/tos-cn-i-3jr8j4ixpe/61bceb3afeb54c1c80ffdd598ac2f72d~tplv-3jr8j4ixpe-aigc_resize:0:0.jpeg?lk3s=43402efa&x-expires=1735344000&x-signature=DUY6jlx4zAXRYJeATyjZ3O6F1Pw%3D&format=.jpeg"
    },
    {
      "url": "https://p3-heycan-hgt-sign.byteimg.com/tos-cn-i-3jr8j4ixpe/e37ab3cd95854cd7b37fb697ea2cb4da~tplv-3jr8j4ixpe-aigc_resize:0:0.jpeg?lk3s=43402efa&x-expires=1735344000&x-signature=oKtY400tjZeydKMyPZufjt0Qpjs%3D&format=.jpeg"
    },
    {
      "url": "https://p9-heycan-hgt-sign.byteimg.com/tos-cn-i-3jr8j4ixpe/13841ff1c30940cf931eccc22405656b~tplv-3jr8j4ixpe-aigc_resize:0:0.jpeg?lk3s=43402efa&x-expires=1735344000&x-signature=4UffSRMmOeYoC0u%2B5igl9S%2BfYKs%3D&format=.jpeg"
    },
    {
      "url": "https://p6-heycan-hgt-sign.byteimg.com/tos-cn-i-3jr8j4ixpe/731c350244b745d5990e8931b79b7fe7~tplv-3jr8j4ixpe-aigc_resize:0:0.jpeg?lk3s=43402efa&x-expires=1735344000&x-signature=ywYjZQeP3t2yyvx6Wlud%2BCB28nU%3D&format=.jpeg"
    }
  ]
}
```
